/** Minified by https://javascript-minifier.com/ */
var Model=[{name:"Lincoln Memorial",flickr:"Lincoln+Memorial",lat:38.889041,lng:-77.050123},{name:"Tomb of the Unknown Soldier",flickr:"Tomb+of+the+Unknown+Soldier",lat:38.876212,lng:-77.071892},{name:"US Holocaust Memorial Museum",flickr:"US+Holocaust+Memorial+Museum",lat:38.886768,lng:-77.032549},{name:"White House",flickr:"White+House+Washington+DC",lat:38.89768,lng:-77.03653},{name:"Washington Monument",flickr:"Washington+Monument",lat:38.88939,lng:-77.03516}],Flickr=function(){var o=this,e="161c128ea08e95e6760c4b48e7d6a2be";o.displayInfo=function(n){o.url="https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key="+e+"&tags="+n.tag+"&format=json&jsoncallback=?",o.apiTimeout=setTimeout(function(){var o="Couldn't Load Data",e="http://placehold.it/150x150?text=Error!";mapModel.openWindow.setContent('<h5 class="panel-title">'+o+'</h5><hr><div class="text-center"><img alt="Error" src="'+e+'" class="img-thumbnail img-sm"></div>')},4e3),$.ajax({url:o.url,dataType:"json"}).fail(function(){var o="Couldn't Load Data",e="http://placehold.it/150x150?text=Error!";mapModel.openWindow.setContent('<h5 class="panel-title">'+o+'</h5><hr><div class="text-center"><img alt="Error" src="'+e+'" class="img-thumbnail img-sm"></div>')}).done(function(e){var a,i=e.photos.photo[0];a=""===i?"No image available":"http://farm"+i.farm+".static.flickr.com/"+i.server+"/"+i.id+"_"+i.secret+"_m.jpg",mapModel.openWindow.setContent('<h5 class="panel-title">'+n.name+'</h5><hr><div class="text-center"><img alt="'+n.name+'" src="'+a+'" class="img-thumbnail img-sm"></div>'),clearTimeout(o.apiTimeout)})}},Location=function(o){var e=this;e.name=o.name,e.flickr=o.flickr,e.coords={lat:o.lat,lng:o.lng}},Map=function(){var o=this;o.center={lat:38.884667,lng:-77.052741},o.markers=[],o.resetMap=function(){appViewModel.focusLoc(o.center),appViewModel.locQuery(""),o.map.setZoom(13)},o.resetMarkers=function(){o.markers.forEach(function(o){o.setVisible(!0)})},o.closeWindow=function(){o.openWindow&&o.openWindow.close()},o.style=[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],o.initMap=function(){o.map=new google.maps.Map(document.getElementById("googleMap"),{center:o.center,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.HYBRID,minZoom:3,maxZoom:20,styles:o.style,zoom:13,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM}}),appViewModel.filteredLocations().forEach(function(e){var n=new google.maps.Marker({animation:google.maps.Animation.DROP,name:e.name,tag:e.flickr,position:e.coords,map:o.map});e.marker=n,o.markers.push(n)}),o.markers.map(function(e){e.info=new google.maps.InfoWindow,e.addListener("click",function(){o.map.setZoom(15),o.map.setCenter(e.position),flickrModel.displayInfo(e),o.closeWindow(),e.setAnimation(google.maps.Animation.BOUNCE),window.setTimeout(function(){e.setAnimation(null)},1500),e.info.open(o.map,e),o.openWindow=e.info}),o.map.addListener("click",function(){o.map.setZoom(13),o.closeWindow()})})}},viewModel=function(){var o=this;o.windows=ko.observableArray([]),o.locations=ko.observableArray([]),o.locQuery=ko.observable(""),o.filteredLocations=ko.computed(function(){var e=o.locQuery().toLowerCase();return ko.utils.arrayFilter(o.locations(),function(n){var a=-1!==n.name.toLowerCase().indexOf(e);return e?(a?n.marker.setVisible(!0):(n.marker.setVisible(!1),n.marker.info==mapModel.openWindow&&mapModel.closeWindow()),a):(a&&mapModel.resetMarkers(),o.locations())})}),o.focusLoc=function(o){mapModel.map.setZoom(15),o.coords?(mapModel.closeWindow(),mapModel.map.setCenter({lat:o.coords.lat,lng:o.coords.lng}),flickrModel.displayInfo(o.marker),o.marker.info.open(mapModel.map,o.marker),o.marker.setAnimation(google.maps.Animation.BOUNCE),window.setTimeout(function(){o.marker.setAnimation(null)},1500),mapModel.openWindow=o.marker.info):(mapModel.map.setCenter(o),mapModel.closeWindow())}},appViewModel=new viewModel,mapModel=new Map,flickrModel=new Flickr;$("#error").hide(),$(document).ready(function(){ko.applyBindings(appViewModel)});var initPage=function(){Model.forEach(function(o){appViewModel.locations.push(new Location(o))}),mapModel.initMap()},googleError=function(){Model.forEach(function(o){appViewModel.locations.push(new Location(o))}),$("#googleMap").hide(),$("#error").show()};
